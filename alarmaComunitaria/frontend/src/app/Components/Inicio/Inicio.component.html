<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-title-group">
      <img src="assets/images/logo_full.png" alt="Logo" class="header-logo" />
      <div class="header-title-text">
        <h1>Kuntur</h1>
        <span class="header-subtitle">Alarma Comunitaria</span>
      </div>
    </div>
    <div class="header-controls">
      <app-notification-button></app-notification-button>
      <app-notifications-panel></app-notifications-panel>
      <button (click)="logout()" class="logout-button">Cerrar Sesi칩n</button>
    </div>
  </header>

  <main class="dashboard-content">
    <div class="main-equal-grid">
      <div class="equal-col">
        <div *ngIf="showCameraStream; else soloBoton" class="camera-panic-vertical" style="display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1.5rem; height:100%;">
          <!-- Stream de la c치mara -->
          <div class="camera-stream-container">
            <h3>游닟 Stream de C치mara</h3>
            <img [src]="cameraStreamUrl + 'video_feed'" alt="Stream de c치mara" class="camera-stream" />
            <p class="camera-status">C치mara activa - Detecci칩n en tiempo real</p>
          </div>
          
          <!-- Bot칩n de p치nico con c치mara -->
          <div class="panic-btn-container">
            <button
              class="panic-btn"
              [class.panic-pulse-active]="isPanicPulsing"
              (click)="onPanicClick()"
            >
              <span class="panic-circle">
                <svg class="panic-icon-svg" width="40" height="40" viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="12" fill="#fff"/>
                  <path d="M12 7v5" stroke="#ff4d4f" stroke-width="2" stroke-linecap="round"/>
                  <circle cx="12" cy="16" r="1" fill="#ff4d4f"/>
                </svg>
              </span>
              <span class="panic-text">Bot칩n de P치nico</span>
            </button>
          </div>
        </div>
        <ng-template #soloBoton>
          <div class="panic-btn-container">
            <button
              class="panic-btn"
              [class.panic-pulse-active]="isPanicPulsing"
              (click)="onPanicClick()"
            >
              <span class="panic-circle">
                <svg class="panic-icon-svg" width="40" height="40" viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="12" fill="#fff"/>
                  <path d="M12 7v5" stroke="#ff4d4f" stroke-width="2" stroke-linecap="round"/>
                  <circle cx="12" cy="16" r="1" fill="#ff4d4f"/>
                </svg>
              </span>
              <span class="panic-text">Bot칩n de P치nico</span>
            </button>
          </div>
        </ng-template>
      </div>

      <div class="equal-col">
        <div class="mapa-equal-card">
          <app-mapa></app-mapa>
        </div>
      </div>

      <div class="equal-col">
        <div class="alertas-equal-card">
          <app-alertas></app-alertas>
        </div>
      </div>
    </div>

    <app-alert-popup></app-alert-popup>
  </main>
</div>
